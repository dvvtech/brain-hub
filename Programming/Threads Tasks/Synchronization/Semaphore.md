Семафор (`Semaphore` в C#) используется для контроля доступа к ресурсу, который ограничен определённым числом одновременных доступов. Примером может служить ограничение количества потоков, которые могут одновременно выполнять определённую операцию.
1-ый параметр Этот параметр определяет начальное количество свободных слотов в семафоре,
2-ой параметр Этот параметр определяет максимальное количество потоков, которые могут одновременно находиться в семафоре.
Slim версия менее ресурсоемкая
```cs
using System;
using System.Threading;
using System.Threading.Tasks;

class Program
{
    // Создание семафора с максимальным количеством одновременных доступов 3 и начальным количеством 3
    private static Semaphore semaphore = new Semaphore(3, 3);

    static void Main(string[] args)
    {
        for (int i = 0; i < 10; i++)
        {
            Task.Run(() =>
            {
                // Запрос на вход в семафор
                Console.WriteLine($"{Task.CurrentId} ожидает доступ...");
                semaphore.WaitOne();

                // Критическая секция
                Console.WriteLine($"{Task.CurrentId} вошёл в семафор.");
                Thread.Sleep(1000); // Имитация работы

                // Выход из семафора
                Console.WriteLine($"{Task.CurrentId} выходит из семафора.");
                semaphore.Release();
            });
        }

        Console.ReadKey();
    }
}

```

### Semaphore

1. **Область Применения**: `Semaphore` может использоваться как для синхронизации потоков внутри одного приложения, так и для межпроцессной синхронизации.
2. **Платформенная Зависимость**: Он является более тяжеловесным и зависит от операционной системы (использует ядерные конструкции ОС).
3. **Производительность**: `Semaphore` может быть медленнее `SemaphoreSlim` из-за своей зависимости от системных вызовов.
4. **Возможности**: Поддерживает именованные семафоры, что позволяет использовать их для межпроцессной синхронизации.
5. **Пример использования**: Подходит для межпроцессной синхронизации или когда требуются именованные семафоры.

### SemaphoreSlim

1. **Область Применения**: `SemaphoreSlim` предназначен исключительно для синхронизации внутри одного приложения (внутрипроцессная синхронизация).
2. **Платформенная Зависимость**: Является более легковесным и не зависит от ядра операционной системы, поэтому обеспечивает более высокую производительность.
3. **Производительность**: Обычно работает быстрее `Semaphore`, особенно в сценариях с высокой частотой контендирования.
4. **Возможности**: Не поддерживает именованные семафоры и межпроцессную синхронизацию.
5. **Пример использования**: Идеально подходит для легковесной внутрипроцессной синхронизации в .NET-приложениях.
Способ управления транзакциями, которые распределены между несколькими сервисами(у каждого сервиса своя бд) и этот способ обеспечивает согласованность данных между этими сервисами.
Сага представляет собой бизнес транзакцию, которая охватывает несколько сервисов. Также можно сказать что сага(или бизнес транзакция) представляет последовательность локальных транзакций. Каждая локальная транзакция в саге обновляет данные в одном сервисе и отправляет событие или сообщение, которое запускает следующую локальную транзакцию в другом сервисе. Если одна из локальных транзакций в саге завершается неудачно, сага исполняет компенсационные транзакции для отката изменений, сделанных предыдущими локальными транзакциями.
Уточнение: локальные транзакции они могут быть все в координирующем сервисе или распределены по нескольким сервисам и у каждого сервиса своя локальная транзакция.

Саги могут быть организованы двумя способами:

1. **Хореография (Choreography)**: Каждый сервис в саге знает, какое событие нужно отправить или как реагировать на события. Нет центрального координатора.
2. **Оркестрация (Orchestration)**: Центральный оркестратор (координатор) отвечает за вызов локальных транзакций и обработку их успешности или ошибок.

### Пример Сценария Саги

Рассмотрим пример саги в системе обработки заказов, где участвуют три микросервиса: сервис заказов, сервис платежей и сервис доставки.

#### Шаги Саги:

1. **Создание Заказа**:
    
    - Пользователь создает заказ через сервис заказов.
    - Сервис заказов затем инициирует сагу, отправляя запрос на оплату в сервис платежей.
2. **Обработка Платежа**:
    
    - Сервис платежей обрабатывает платеж.
    - Если платеж успешен, сервис платежей отправляет событие об успешной оплате, которое перехватывает сервис доставки.
    - Если платеж не удался, сервис платежей отправляет событие о неудаче, и сервис заказов отменяет заказ.
3. **Организация Доставки**:
    
    - При успешной оплате сервис доставки обрабатывает информацию о доставке.
    - Если доставка не может быть организована, сервис доставки отправляет событие о неудаче, и сага инициирует компенсационные транзакции (например, возврат средств).

#### Пример Компенсационных Транзакций:

- Если в любой точке процесса происходит сбой, сага управляет последовательностью компенсационных транзакций, чтобы откатить систему в состояние, которое было до начала саги (например, отмена заказа и возврат средств).



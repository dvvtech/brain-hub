1. Потерянная запись. Read Uncommitted (Чтение незафиксированных данных)
Наименее строгий уровень изоляции. Транзакции могут читать данные, измененные другими транзакциями, даже если эти изменения еще не были зафиксированы (commit). Это может привести к грязному чтению.
Пример:
изначально на счету было 500р.
кассир 1 списал с счета 300 р. и транзакция еще не закомитилась и потом
кассир 2 записал на счет 300 р.
Итого результат должен быть 500 а по факту другой
Кто последний вписал результат того и тапки.

![[Pasted image 20240127221108.png]]

2. Грязное чтение. Read Committed (Чтение зафиксированных данных).
Это уровень по умолчанию используется для Postgres.
На этом уровне транзакция может читать только те данные, которые уже были зафиксированы (commit) другими транзакциями. Это предотвращает грязное чтение, но все еще допускает неповторяющееся чтение, когда данные изменяются другими транзакциями между двумя запросами в одной транзакции.
Пример:
кассир 1 списал с счета 300 потом передумал и сделал откат
кассиру понадобилась инфа по счету и он ее считал до того как кассир 1 закрыл свою транзакцию

![[Pasted image 20240127221300.png]]

3. Повторимое чтение. Repeatable Read (Повторяемое чтение).
Транзакция не видит изменений данных, которые она уже прочитала, даже если эти изменения внесены и зафиксированы другими транзакциями. Это предотвращает грязное и неповторяющееся чтение, но фантомное чтение все еще возможно.
Пример:
 Есть некие данные, кассир 1 строит отчет, система считала данные и записала в первую колонку взяв минимум от них. Далее кассир 2 влез в эту таблицу и изменил некоторые строки в этой таблице а у кассира один идет построение отчета и во вторую колонки система считывает уже новые данные. В итоге отчет построен на основании разных данных.
![[Pasted image 20240127222335.png]]

4. Фантомы
Тоже самое что и 3 пункт только данные удаляются или добавляются
![[Pasted image 20240127222559.png]]


5. Serializable (Сериализуемость).
Самый строгий уровень изоляции. Транзакции выполняются так, как будто они происходят последовательно, одна за другой. Это предотвращает грязное чтение, неповторяющееся чтение и фантомное чтение. Однако, такая строгая изоляция может значительно снизить производительность и увеличить вероятность взаимных блокировок.

6. Snapshot (Снимок): Этот уровень часто рассматривается отдельно и используется в некоторых системах управления базами данных (например, в Microsoft SQL Server). Транзакция работает с "снимком" данных, существовавшим в момент её начала, что позволяет избежать блокировок, вызванных другими транзакциями.

Итоги: чтобы бороться с этими проблемами нужно изолировать транзакции.

1. Блокировки - блокируем данные в базе(одну строку или всю таблицу, на чтение или на изменение данных)
